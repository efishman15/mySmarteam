<ion-modal-view dir="{{$root.settings.languages[$root.user.settings.language].direction}}">

    <ion-header-bar align-title="center" class="bar bar-dark bar-stable">
        <h1 class="title">{{questionModalTitle}}</h1>

        <div class="button button-clear" ng-click="closeQuestionModal(false)">
            <span class="icon ion-close"></span>
        </div>
    </ion-header-bar>

    <ion-content has-header="true" scroll="true" padding="true"
                 dir="{{$root.settings.languages[$root.user.settings.language].direction}}" drag-content="false">

        <form name="questionForm" novalidate="novalidate" class="padding" scope-form-level="3">

            <div class="padding-{{$root.settings.languages[$root.user.settings.language].align}}">
                <div class="row item item-input item-borderless full-width">
                    <label class="col question-editor-label"
                           ng-class="{ 'has-error' : questionForm.question.$invalid && questionForm.question.$touched, 'valid-lr' : questionForm.question.$valid}"
                           ng-messages-include="templates/question-error-list.html">
                        <textarea
                                rows="5"
                                class="padding-left padding-right question-editor-input"
                                placeholder="{{ 'QUESTION' | translate }}"
                                name="question"
                                ng-model="question.text"
                                ng-maxlength="{{$root.settings.quiz.question.maxLength}}"
                                maxlength="{{$root.settings.quiz.question.maxLength}}"
                                required>
                        </textarea>

                    </label>
                        <span class="padding-{{$root.settings.languages[$root.user.settings.language].align}} float-{{$root.settings.languages[$root.user.settings.language].oppositeAlign}} question-editor-characters-length">
                            {{question.text ? question.text.length : 0}}/{{$root.settings.quiz.question.maxLength}}
                        </span>
                </div>
                <div class="error-container last-error-container form-errors"
                     ng-show="questionForm.question.$error && questionForm.$submitted"
                     ng-messages="questionForm.question.$error"
                     ng-messages-include="templates/question-error-list.html">
                </div>

            </div>

            <div class="padding-top padding-{{$root.settings.languages[$root.user.settings.language].align}}">
                <div class="row item item-input item-borderless full-width">
                    <label class="col question-editor-label question-editor-correct-answer-label"
                           ng-class="{ 'has-error' : questionForm.answer0.$invalid && questionForm.answer0.$touched, 'valid-lr' : questionForm.answer1.$valid}"
                           ng-messages-include="templates/question-error-list.html">
                        <textarea
                                rows="2"
                                class="padding-left padding-right question-editor-input"
                                placeholder="{{ 'CORRECT_ANSWER' | translate }}"
                                name="answer0"
                                ng-model="question.answers[0]"
                                ng-maxlength="{{$root.settings.quiz.question.answer.maxLength}}"
                                must-be-different="[questionForm.answer1,questionForm.answer2,questionForm.answer3]"
                                maxlength="{{$root.settings.quiz.question.answer.maxLength}}" required>
                        </textarea>

                    </label>
                        <span class="padding-{{$root.settings.languages[$root.user.settings.language].align}} float-{{$root.settings.languages[$root.user.settings.language].oppositeAlign}} question-editor-characters-length">
                            {{question.answers[0] ? question.answers[0].length : 0}}/{{$root.settings.quiz.question.answer.maxLength}}
                        </span>
                </div>
                <div class="error-container last-error-container form-errors"
                     ng-show="questionForm.answer1.$error && questionForm.$submitted"
                     ng-messages="questionForm.answer1.$error"
                     ng-messages-include="templates/question-error-list.html">
                </div>

            </div>

            <div class="padding-{{$root.settings.languages[$root.user.settings.language].align}}">
                <div class="row item item-input item-borderless full-width">
                    <label class="col question-editor-label question-editor-wrong-answer-label"
                           ng-class="{ 'has-error' : questionForm.answer1.$invalid && questionForm.answer1.$touched, 'valid-lr' : questionForm.answer1.$valid}"
                           ng-messages-include="templates/question-error-list.html">
                        <textarea
                                rows="2"
                                class="padding-left padding-right question-editor-input"
                                placeholder="{{ 'WRONG_ANSWER' | translate }}"
                                name="answer1"
                                ng-model="question.answers[1]"
                                ng-maxlength="{{$root.settings.quiz.question.answer.maxLength}}"
                                must-be-different="[questionForm.answer0,questionForm.answer2,questionForm.answer3]"
                                maxlength="{{$root.settings.quiz.question.answer.maxLength}}" required>
                        </textarea>

                    </label>
                        <span class="padding-{{$root.settings.languages[$root.user.settings.language].align}} float-{{$root.settings.languages[$root.user.settings.language].oppositeAlign}} question-editor-characters-length">
                            {{question.answers[1] ? question.answers[1].length : 0}}/{{$root.settings.quiz.question.answer.maxLength}}
                        </span>
                </div>
                <div class="error-container last-error-container form-errors"
                     ng-show="questionForm.answer1.$error && questionForm.$submitted"
                     ng-messages="questionForm.answer1.$error"
                     ng-messages-include="templates/question-error-list.html">
                </div>

            </div>

            <div class="padding-{{$root.settings.languages[$root.user.settings.language].align}}">
                <div class="row item item-input item-borderless full-width">
                    <label class="col question-editor-label question-editor-wrong-answer-label"
                           ng-class="{ 'has-error' : questionForm.answer0.$invalid && questionForm.answer2.$touched, 'valid-lr' : questionForm.answer2.$valid}"
                           ng-messages-include="templates/question-error-list.html">
                        <textarea
                                rows="2"
                                class="padding-left padding-right question-editor-input"
                                placeholder="{{ 'WRONG_ANSWER' | translate }}"
                                name="answer2"
                                ng-model="question.answers[2]"
                                ng-maxlength="{{$root.settings.quiz.question.answer.maxLength}}"
                                must-be-different="[questionForm.answer0,questionForm.answer1,questionForm.answer3]"
                                maxlength="{{$root.settings.quiz.question.answer.maxLength}}" required>
                        </textarea>
                    </label>
                        <span class="padding-{{$root.settings.languages[$root.user.settings.language].align}} float-{{$root.settings.languages[$root.user.settings.language].oppositeAlign}} question-editor-characters-length">
                            {{question.answers[2] ? question.answers[2].length : 0}}/{{$root.settings.quiz.question.answer.maxLength}}
                        </span>

                </div>
                <div class="error-container last-error-container form-errors"
                     ng-show="questionForm.answer2.$error && questionForm.$submitted"
                     ng-messages="questionForm.answer2.$error"
                     ng-messages-include="templates/question-error-list.html">
                </div>

            </div>

            <div class="padding-{{$root.settings.languages[$root.user.settings.language].align}}">
                <div class="row item item-input item-borderless full-width">
                    <label class="col question-editor-label question-editor-wrong-answer-label"
                           ng-class="{ 'has-error' : questionForm.answer3.$invalid && questionForm.answer3.$touched, 'valid-lr' : questionForm.answer3.$valid}"
                           ng-messages-include="templates/question-error-list.html">
                        <textarea
                                rows="2"
                                class="padding-left padding-right question-editor-input"
                                placeholder="{{ 'WRONG_ANSWER' | translate }}"
                                name="answer3"
                                ng-model="question.answers[3]"
                                ng-maxlength="{{$root.settings.quiz.question.answer.maxLength}}"
                                must-be-different="[questionForm.answer0,questionForm.answer1,questionForm.answer2]"
                                maxlength="{{$root.settings.quiz.question.answer.maxLength}}" required>
                        </textarea>

                    </label>
                        <span class="padding-{{$root.settings.languages[$root.user.settings.language].align}} float-{{$root.settings.languages[$root.user.settings.language].oppositeAlign}} question-editor-characters-length">
                            {{question.answers[3] ? question.answers[3].length : 0}}/{{$root.settings.quiz.question.answer.maxLength}}
                        </span>
                </div>

                <div class="error-container last-error-container form-errors"
                     ng-show="questionForm.answer3.$error && questionForm.$submitted"
                     ng-messages="questionForm.answer3.$error"
                     ng-messages-include="templates/question-error-list.html">
                </div>

            </div>

            <div class="padding-{{$root.settings.languages[$root.user.settings.language].align}}">
                <span class="question-editor-answers-note">
                {{'RANDOM_ANSWERS_NOTE' | translate}}
                </span>
            </div>

            <div class="button-bar padding question-editor-set-button">
                <button class="button button-bar button-calm" translate="OK"
                        ng-click="questionForm.$valid && closeQuestionModal(true)"
                        analytics-on="click" analytics-event="question/set">
                </button>
            </div>

            </form>
    </ion-content>

</ion-modal-view>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            