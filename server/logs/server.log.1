{"name":"whoSmarterServer","hostname":"EddyHomePC","pid":10036,"level":50,"data":{"token":"19063640-7c7a-11e5-9f1c-eb97612fd278","DbHelper":{"db":{"domain":{"domain":null,"_events":{},"members":[]},"_events":{},"s":{"databaseName":"whoSmarter","children":[],"topology":{"domain":"[Circular]","_events":{},"s":{"server":{"domain":"[Circular]","_events":{},"s":{"options":{"socketOptions":{},"auto_reconnect":true,"host":"localhost","port":27017,"reconnect":true,"emitError":true,"size":5,"disconnectHandler":{"s":{"storedOps":[],"storeOptions":{"force":false,"bufferMaxEntries":-1},"topology":"[Circular]"},"length":0},"bson":{},"wireProtocolHandler":{}},"callbacks":{"callbacks":{},"id":51,"type":"server"},"logger":{"className":"Server"},"state":"connected","reconnect":true,"reconnectTries":30,"reconnectInterval":1000,"emitError":true,"currentReconnectRetry":30,"ismaster":{"ismaster":true,"maxBsonObjectSize":16777216,"maxMessageSizeBytes":48000000,"maxWriteBatchSize":1000,"localTime":"2015-10-27T07:13:01.819Z","maxWireVersion":3,"minWireVersion":0,"ok":1},"authProviders":{"mongocr":{"authStore":[]},"x509":{"authStore":[]},"plain":{"authStore":[]},"gssapi":{"authStore":[]},"sspi":{"authStore":[]},"scram-sha-1":{"authStore":[]}},"id":51,"disconnectHandler":"[Circular]","wireProtocolHandler":"[Circular]","bsonInstance":{},"bson":"[Circular]","pool":{"domain":"[Circular]","_events":{},"options":"[Circular]","size":5,"connections":[{"id":151,"host":"localhost","port":27017},{"id":152,"host":"localhost","port":27017},{"id":153,"host":"localhost","port":27017},{"id":154,"host":"localhost","port":27017},{"id":155,"host":"localhost","port":27017}],"state":"connected","index":4,"dead":false,"logger":{"className":"Pool"},"id":51},"serverDetails":{"host":"localhost","port":27017,"name":"localhost:27017"}},"name":"localhost:27017","bson":"[Circular]","wireProtocolHandler":"[Circular]","id":51},"sCapabilities":null,"clonedOptions":"[Circular]","reconnect":true,"emitError":true,"poolSize":5,"storeOptions":"[Circular]","store":"[Circular]","host":"localhost","port":27017,"options":{"read_preference_tags":null,"read_preference":"primary","url":"mongodb://localhost:27017/whoSmarter","native_parser":false,"readPreference":{"_type":"ReadPreference","mode":"primary"}}},"bson":"[Circular]","isMasterDoc":"[Circular]","poolSize":5,"autoReconnect":true,"host":"localhost","port":27017,"emitOpen":false,"connectTimeoutMS":30000,"socketTimeoutMS":0},"options":"[Circular]","logger":{"className":"Db"},"bson":"[Circular]","readPreference":"[Circular]","bufferMaxEntries":-1,"parentDb":null,"nativeParser":false},"serverConfig":"[Circular]","bufferMaxEntries":-1,"databaseName":"whoSmarter","options":"[Circular]","native_parser":false,"slaveOk":true,"writeConcern":{}}},"session":{"_id":"562f1de56cd1a17fb2e66d34","userId":"55ec2306f044dcf8356cf3a4","facebookUserId":"1041809664","friends":{"list":[{"id":"10153534425349268","name":"Lior Porat"},{"id":"10204667515439720","name":"Ophir Fishman"},{"id":"908203765883031","name":"Study Before"},{"id":"849153768467187","name":"Eyal Porat"},{"id":"860616130713037","name":"Noga Fishman"}],"noPermission":false},"isAdmin":true,"facebookAccessToken":"CAAAAUCxqXfgBALe8BMjxbrurVwqOZAlBZCDeWbgjdmiWD759OE4WLHCziyGgHfO4xPsxLZAHjZCZBNHpkSfBZCavC1MzjYHCGg2CxzJInp1cxHZAJYzWZBKW3jlFnY7KxoSikQQqfO6PXLykSlPI5O7QgNcWsSr5FZCycuhviZAIt7BQxQZACmjtNwMkTbjbFORznIlFmuxx2zTXgZDZD","name":"Eddy Fishman","ageRange":{"min":21},"avatar":"https://graph.facebook.com/1041809664/picture?type=square","created":1445929955236,"expires":"2015-10-27T07:42:59.709Z","userToken":"19063640-7c7a-11e5-9f1c-eb97612fd278","settings":{"language":"he","timezoneOffset":-180,"sound":true},"score":87855,"xp":15635,"rank":5,"features":{"newContest":{"name":"newContest","lockText":"FEATURE_LOCKED_NEW_CONTEST","unlockText":"NEW_CONTEST_UNLOCKED","unlockRank":1,"purchaseData":{"cost":"0.99","currency":"USD","displayNames":{"en":"New contest - unlock key","es":"Nuevo concurso - desbloquear clave","he":"מפתח ליצירת תחרות חדשה"},"productId":"s1000","android":{"consume":true},"formattedCost":"$0.99"},"locked":false},"challengeFriendContest":{"name":"challengeFriendContest","lockText":"FEATURE_CHALLENGE_FRIEND_CONTEST","unlockText":"CHALLENGE_FRIEND_CONTEST_UNLOCKED","unlockRank":null,"purchaseData":{"cost":"0.99","currency":"USD","displayNames":{"en":"Challenge friend contest - unlock key","es":"Desafía amigo concurso - tecla de desbloqueo","he":"מפתח להזמנת חבר לדו קרב"},"productId":"s1001","android":{"consume":true},"formattedCost":"$0.99"},"locked":true}},"clientInfo":{"platform":"web","mobile":false},"gcmRegistrationId":"fa-bH6KZzss:APA91bGz7Q0xNoEreD2sifaJvcBS-71wVwP2hh7mg5QAwOnP1hcLjKwjWBm1DnWJsHO2KaGlOPm9IMup7fLN75lBDlAznaW4d9ne4-mX5udRVAQUxb7ey3uT0K-MIFeuB1ogOHi0YOWb","quiz":{"clientData":{"totalQuestions":5,"currentQuestionIndex":3,"finished":false,"currentQuestion":{"text":"באיזו שנה הוכתרה אליזבת ה-2 כמלכת בריטניה ?","answers":[{"id":1,"text":"ב- 1952"},{"id":2,"text":"ב- 1993"},{"id":3,"text":"ב- 1492"},{"id":4,"text":"ב- 983"}],"wikipediaHint":"אליזבת_השנייה","hintCost":40,"wikipediaAnswer":"אליזבת_השנייה","answerCost":100,"correctRatio":0.3333333333333333,"direction":"rtl","animation":"zoomOutRight"}},"serverData":{"previousQuestions":["55cb3f8148023f0bdc07bf09","55cb3f6a48023f0bdc07bc7e","55cb3fb148023f0bdc07c43d"],"contestId":"562e5caebdc90fa80fcbe02d","score":250,"correctAnswers":2,"share":{"data":{"leadingTeam":1,"myTeamStartedBehind":true,"friendsAboveMe":[{"id":"1041809664","rank":1,"score":7450,"avatar":"https://graph.facebook.com/1041809664/picture?type=square","name":"Eddy Fishman"}]},"story":{}},"currentQuestion":{"_id":"55cb3fb148023f0bdc07c43d","questionId":6151,"text":"באיזו שנה הוכתרה אליזבת ה-2 כמלכת בריטניה ?","topicId":5,"minAge":18,"maxAge":120,"createDate":"19/02/2010 10:44:51","wikipediaHint":"אליזבת_השנייה","wikipediaAnswer":"אליזבת_השנייה","correctAnswers":1,"wrongAnswers":2,"correctRatio":0.3333333333333333,"answers":[{"id":1,"text":"ב- 1952","correct":true},{"id":2,"text":"ב- 1993","correct":false},{"id":4,"text":"ב- 1492","correct":false},{"id":3,"text":"ב- 983","correct":false}]}}}},"questionCriteria":{"$and":[{"_id":{"$nin":"[Circular]"}},{"topicId":{"$in":[5,270]}},{"$or":[{"correctAnswers":0,"wrongAnswers":0},{"$and":[{"correctRatio":{"$gte":0.15}},{"correctRatio":{"$lt":0.3}}]}]},{"minAge":{"$lte":21}}]},"questionsCount":0},"dbError":null,"msg":"Error retrieving next question from database","time":"2015-10-27T07:13:01.836Z","v":0}
{"name":"whoSmarterServer","hostname":"EddyHomePC","pid":10036,"level":50,"data":{"token":"19063640-7c7a-11e5-9f1c-eb97612fd278","DbHelper":{"db":{"domain":{"domain":null,"_events":{},"members":[]},"_events":{},"s":{"databaseName":"whoSmarter","children":[],"topology":{"domain":"[Circular]","_events":{},"s":{"server":{"domain":"[Circular]","_events":{},"s":{"options":{"socketOptions":{},"auto_reconnect":true,"host":"localhost","port":27017,"reconnect":true,"emitError":true,"size":5,"disconnectHandler":{"s":{"storedOps":[],"storeOptions":{"force":false,"bufferMaxEntries":-1},"topology":"[Circular]"},"length":0},"bson":{},"wireProtocolHandler":{}},"callbacks":{"callbacks":{},"id":65,"type":"server"},"logger":{"className":"Server"},"state":"connected","reconnect":true,"reconnectTries":30,"reconnectInterval":1000,"emitError":true,"currentReconnectRetry":30,"ismaster":{"ismaster":true,"maxBsonObjectSize":16777216,"maxMessageSizeBytes":48000000,"maxWriteBatchSize":1000,"localTime":"2015-10-27T07:13:55.394Z","maxWireVersion":3,"minWireVersion":0,"ok":1},"authProviders":{"mongocr":{"authStore":[]},"x509":{"authStore":[]},"plain":{"authStore":[]},"gssapi":{"authStore":[]},"sspi":{"authStore":[]},"scram-sha-1":{"authStore":[]}},"id":65,"disconnectHandler":"[Circular]","wireProtocolHandler":"[Circular]","bsonInstance":{},"bson":"[Circular]","pool":{"domain":"[Circular]","_events":{},"options":"[Circular]","size":5,"connections":[{"id":193,"host":"localhost","port":27017},{"id":194,"host":"localhost","port":27017},{"id":196,"host":"localhost","port":27017},{"id":195,"host":"localhost","port":27017},{"id":197,"host":"localhost","port":27017}],"state":"connected","index":4,"dead":false,"logger":{"className":"Pool"},"id":65},"serverDetails":{"host":"localhost","port":27017,"name":"localhost:27017"}},"name":"localhost:27017","bson":"[Circular]","wireProtocolHandler":"[Circular]","id":65},"sCapabilities":null,"clonedOptions":"[Circular]","reconnect":true,"emitError":true,"poolSize":5,"storeOptions":"[Circular]","store":"[Circular]","host":"localhost","port":27017,"options":{"read_preference_tags":null,"read_preference":"primary","url":"mongodb://localhost:27017/whoSmarter","native_parser":false,"readPreference":{"_type":"ReadPreference","mode":"primary"}}},"bson":"[Circular]","isMasterDoc":"[Circular]","poolSize":5,"autoReconnect":true,"host":"localhost","port":27017,"emitOpen":false,"connectTimeoutMS":30000,"socketTimeoutMS":0},"options":"[Circular]","logger":{"className":"Db"},"bson":"[Circular]","readPreference":"[Circular]","bufferMaxEntries":-1,"parentDb":null,"nativeParser":false},"serverConfig":"[Circular]","bufferMaxEntries":-1,"databaseName":"whoSmarter","options":"[Circular]","native_parser":false,"slaveOk":true,"writeConcern":{}}},"session":{"_id":"562f1de56cd1a17fb2e66d34","userId":"55ec2306f044dcf8356cf3a4","facebookUserId":"1041809664","friends":{"list":[{"id":"10153534425349268","name":"Lior Porat"},{"id":"10204667515439720","name":"Ophir Fishman"},{"id":"908203765883031","name":"Study Before"},{"id":"849153768467187","name":"Eyal Porat"},{"id":"860616130713037","name":"Noga Fishman"}],"noPermission":false},"isAdmin":true,"facebookAccessToken":"CAAAAUCxqXfgBALe8BMjxbrurVwqOZAlBZCDeWbgjdmiWD759OE4WLHCziyGgHfO4xPsxLZAHjZCZBNHpkSfBZCavC1MzjYHCGg2CxzJInp1cxHZAJYzWZBKW3jlFnY7KxoSikQQqfO6PXLykSlPI5O7QgNcWsSr5FZCycuhviZAIt7BQxQZACmjtNwMkTbjbFORznIlFmuxx2zTXgZDZD","name":"Eddy Fishman","ageRange":{"min":21},"avatar":"https://graph.facebook.com/1041809664/picture?type=square","created":1445929955236,"expires":"2015-10-27T07:43:53.307Z","userToken":"19063640-7c7a-11e5-9f1c-eb97612fd278","settings":{"language":"he","timezoneOffset":-180,"sound":true},"score":87855,"xp":15695,"rank":5,"features":{"newContest":{"name":"newContest","lockText":"FEATURE_LOCKED_NEW_CONTEST","unlockText":"NEW_CONTEST_UNLOCKED","unlockRank":1,"purchaseData":{"cost":"0.99","currency":"USD","displayNames":{"en":"New contest - unlock key","es":"Nuevo concurso - desbloquear clave","he":"מפתח ליצירת תחרות חדשה"},"productId":"s1000","android":{"consume":true},"formattedCost":"$0.99"},"locked":false},"challengeFriendContest":{"name":"challengeFriendContest","lockText":"FEATURE_CHALLENGE_FRIEND_CONTEST","unlockText":"CHALLENGE_FRIEND_CONTEST_UNLOCKED","unlockRank":null,"purchaseData":{"cost":"0.99","currency":"USD","displayNames":{"en":"Challenge friend contest - unlock key","es":"Desafía amigo concurso - tecla de desbloqueo","he":"מפתח להזמנת חבר לדו קרב"},"productId":"s1001","android":{"consume":true},"formattedCost":"$0.99"},"locked":true}},"clientInfo":{"platform":"web","mobile":false},"gcmRegistrationId":"fa-bH6KZzss:APA91bGz7Q0xNoEreD2sifaJvcBS-71wVwP2hh7mg5QAwOnP1hcLjKwjWBm1DnWJsHO2KaGlOPm9IMup7fLN75lBDlAznaW4d9ne4-mX5udRVAQUxb7ey3uT0K-MIFeuB1ogOHi0YOWb","quiz":{"clientData":{"totalQuestions":5,"currentQuestionIndex":3,"finished":false,"currentQuestion":{"text":"כלי קשת, גדול יותר מכינור וקטן יותר מצ'לו","answers":[{"id":1,"text":"בנג'ו"},{"id":2,"text":"גיטרה"},{"id":3,"text":"ויולה"},{"id":4,"text":"צ'מבלו"}],"wikipediaHint":"כלי_קשת","hintCost":40,"wikipediaAnswer":"ויולה","answerCost":100,"correctRatio":0.3333333333333333,"direction":"rtl","animation":"fadeOutRightBig"}},"serverData":{"previousQuestions":["55cb3f6d48023f0bdc07bcd5","55cb3fb048023f0bdc07c423","55cb3fb448023f0bdc07c494"],"contestId":"562e5caebdc90fa80fcbe02d","score":350,"correctAnswers":3,"share":{"data":{"leadingTeam":1,"myTeamStartedBehind":true,"friendsAboveMe":[{"id":"1041809664","rank":1,"score":7450,"avatar":"https://graph.facebook.com/1041809664/picture?type=square","name":"Eddy Fishman"}]},"story":{}},"currentQuestion":{"_id":"55cb3fb448023f0bdc07c494","questionId":6242,"text":"כלי קשת, גדול יותר מכינור וקטן יותר מצ'לו","topicId":5,"minAge":0,"maxAge":120,"createDate":"21/02/2010 12:33:14","wikipediaHint":"כלי_קשת","wikipediaAnswer":"ויולה","correctAnswers":1,"wrongAnswers":2,"correctRatio":0.3333333333333333,"answers":[{"id":2,"text":"בנג'ו","correct":false},{"id":4,"text":"גיטרה","correct":false},{"id":1,"text":"ויולה","correct":true},{"id":3,"text":"צ'מבלו","correct":false}]}}}},"questionCriteria":{"$and":[{"_id":{"$nin":"[Circular]"}},{"topicId":{"$in":[5,270]}},{"$or":[{"correctAnswers":0,"wrongAnswers":0},{"$and":[{"correctRatio":{"$gte":0.15}},{"correctRatio":{"$lt":0.3}}]}]},{"minAge":{"$lte":21}}]},"questionsCount":0},"dbError":null,"msg":"Error retrieving next question from database","time":"2015-10-27T07:13:55.410Z","v":0}
{"name":"whoSmarterServer","hostname":"EddyHomePC","pid":8440,"level":50,"count":0,"questionCriteria":{"$and":[{"_id":{"$nin":["55cb3f8c48023f0bdc07c059","55cb3f7748023f0bdc07bdfc","55cb3f8848023f0bdc07bfd3"]}},{"topicId":{"$in":[5,270]}},{"$or":[{"correctAnswers":0,"wrongAnswers":0},{"$and":[{"correctRatio":{"$gte":0.15}},{"correctRatio":{"$lt":0.3}}]}]},{"minAge":{"$lte":21}}]},"dbError":null,"msg":"Error retrieving number of questions from the database","time":"2015-10-27T07:19:11.137Z","v":0}
{"name":"whoSmarterServer","hostname":"EddyHomePC","pid":7028,"level":30,"options":{"url":"https://graph.facebook.com/1","qs":{"access_token":"344342552056|QiE5jBhMjOyz7XxV93voCQf553A","fields":"id,first_name,last_name,name"}},"responseData":{"error":{"message":"(#803) Some of the aliases you requested do not exist: 1","type":"OAuthException","code":803,"fbtrace_id":"AKKEQrjFlmh"}},"msg":"Error received from api","time":"2015-10-27T11:19:55.480Z","v":0}
{"name":"whoSmarterServer","hostname":"EddyHomePC","pid":7060,"level":30,"options":{"url":"https://graph.facebook.com/1","qs":{"access_token":"344342552056|QiE5jBhMjOyz7XxV93voCQf553A","fields":"id,first_name,last_name,name"}},"responseData":{"error":{"message":"(#803) Some of the aliases you requested do not exist: 1","type":"OAuthException","code":803,"fbtrace_id":"EynE/Zs6atT"}},"msg":"Error received from api","time":"2015-10-27T11:21:58.974Z","v":0}
{"name":"whoSmarterServer","hostname":"EddyHomePC","pid":7060,"level":30,"options":{"url":"https://graph.facebook.com/3","qs":{"access_token":"344342552056|QiE5jBhMjOyz7XxV93voCQf553A","fields":"id,first_name,last_name,name"}},"responseData":{"error":{"message":"Unsupported get request. Please read the Graph API documentation at https://developers.facebook.com/docs/graph-api","type":"GraphMethodException","code":100,"fbtrace_id":"FAr+AZO621k"}},"msg":"Error received from api","time":"2015-10-27T11:22:32.045Z","v":0}
{"name":"whoSmarterServer","hostname":"EddyHomePC","pid":7060,"level":30,"options":{"url":"https://graph.facebook.com/undefined","qs":{"access_token":"344342552056|QiE5jBhMjOyz7XxV93voCQf553A","fields":"id,first_name,last_name,name"}},"responseData":{"error":{"message":"Unsupported get request. Please read the Graph API documentation at https://developers.facebook.com/docs/graph-api","type":"GraphMethodException","code":100,"fbtrace_id":"ESmtjMfjQk8"}},"msg":"Error received from api","time":"2015-10-27T11:22:32.840Z","v":0}
{"name":"whoSmarterServer","hostname":"EddyHomePC","pid":10000,"level":60,"err":{"message":"Can't set headers after they are sent.","name":"Error","stack":"Error: Can't set headers after they are sent.\n    at ServerResponse.OutgoingMessage.setHeader (_http_outgoing.js:335:11)\n    at ServerResponse.res.set.res.header (C:\\Dev\\whoSmarter\\server\\node_modules\\express\\lib\\response.js:551:10)\n    at ServerResponse.res.location (C:\\Dev\\whoSmarter\\server\\node_modules\\express\\lib\\response.js:663:8)\n    at ServerResponse.res.redirect (C:\\Dev\\whoSmarter\\server\\node_modules\\express\\lib\\response.js:704:8)\n    at C:\\Dev\\whoSmarter\\server\\api\\facebookCanvas.js:203:13\n    at C:\\Dev\\whoSmarter\\server\\dal\\dalFacebook.js:356:9\n    at Request._callback (C:\\Dev\\whoSmarter\\server\\dal\\dalHttp.js:84:9)\n    at Request.self.callback (C:\\Dev\\whoSmarter\\server\\node_modules\\request\\request.js:198:22)\n    at Request.emit (events.js:110:17)\n    at Request.<anonymous> (C:\\Dev\\whoSmarter\\server\\node_modules\\request\\request.js:1063:14)"},"msg":"Can't set headers after they are sent.","time":"2015-10-27T12:44:30.851Z","v":0}
{"name":"whoSmarterServer","hostname":"EddyHomePC","pid":2868,"level":60,"err":{"message":"Converting circular structure to JSON","name":"TypeError","stack":"TypeError: Converting circular structure to JSON\n    at Object.stringify (native)\n    at C:\\Dev\\whoSmarter\\server\\api\\facebookCanvas.js:193:35\n    at C:\\Dev\\whoSmarter\\server\\dal\\dalFacebook.js:356:9\n    at Request._callback (C:\\Dev\\whoSmarter\\server\\dal\\dalHttp.js:84:9)\n    at Request.self.callback (C:\\Dev\\whoSmarter\\server\\node_modules\\request\\request.js:198:22)\n    at Request.emit (events.js:110:17)\n    at Request.<anonymous> (C:\\Dev\\whoSmarter\\server\\node_modules\\request\\request.js:1063:14)\n    at Request.emit (events.js:129:20)\n    at IncomingMessage.<anonymous> (C:\\Dev\\whoSmarter\\server\\node_modules\\request\\request.js:1009:12)\n    at IncomingMessage.emit (events.js:129:20)"},"msg":"Converting circular structure to JSON","time":"2015-10-27T12:46:02.055Z","v":0}
{"name":"whoSmarterServer","hostname":"EddyHomePC","pid":6452,"level":60,"err":{"message":"Cannot read property 'name' of undefined","name":"TypeError","stack":"TypeError: Cannot read property 'name' of undefined\n    at C:\\Dev\\whoSmarter\\server\\business_logic\\quiz.js:405:58\n    at fn (C:\\Dev\\whoSmarter\\server\\node_modules\\async\\lib\\async.js:712:34)\n    at C:\\Dev\\whoSmarter\\server\\node_modules\\async\\lib\\async.js:1165:16\n    at C:\\Dev\\whoSmarter\\server\\node_modules\\async\\lib\\async.js:657:43\n    at C:\\Dev\\whoSmarter\\server\\node_modules\\async\\lib\\async.js:1161:30\n    at C:\\Dev\\whoSmarter\\server\\dal\\dalDb.js:1006:9\n    at handleCallback (C:\\Dev\\whoSmarter\\server\\node_modules\\mongodb\\lib\\utils.js:95:12)\n    at C:\\Dev\\whoSmarter\\server\\node_modules\\mongodb\\lib\\collection.js:861:5\n    at handleCallback (C:\\Dev\\whoSmarter\\server\\node_modules\\mongodb\\node_modules\\mongodb-core\\lib\\cursor.js:234:5)\n    at nextFunction (C:\\Dev\\whoSmarter\\server\\node_modules\\mongodb\\node_modules\\mongodb-core\\lib\\cursor.js:604:5)"},"msg":"Cannot read property 'name' of undefined","time":"2015-10-27T15:36:29.673Z","v":0}
{"name":"whoSmarterServer","hostname":"EddyHomePC","pid":1612,"level":50,"count":0,"questionCriteria":{"$and":[{"_id":{"$nin":["55cb3f8848023f0bdc07bfda","55cb3f7b48023f0bdc07be5c","55cb3fac48023f0bdc07c3d4"]}},{"topicId":{"$in":[5,270]}},{"$or":[{"correctAnswers":0,"wrongAnswers":0},{"$and":[{"correctRatio":{"$gte":0.14}},{"correctRatio":{"$lt":0.3}}]}]},{"minAge":{"$lte":21}}]},"dbError":null,"msg":"Error retrieving number of questions from the database","time":"2015-10-27T16:45:52.747Z","v":0}
